# 系统调用

1. 什么是系统调用？
2. 系统调用和库函数的区别？
3. 系统调用背后的过程

操作系统作为用户和硬件之间的接口，需要向上提供一些简单易用的服务，最常见的是 **命令接口和程序接口**其中程序接口由一组系统调用组成。

“系统调用”是操作系统提供给应用程序使用的接口，可以理解为一种欧冠可供应用程序调用的特殊函数，应用程序可以发出系统调用请求来获得操作系统的服务。

应用程序通过 **系统调用**请求操作系统的服务。系统中的各种共享资源都有操作系统同意进行管理，因此在用户程序中凡是与资源有关的操作比如存储分配、io操作、文件管理等，都必须通过系统调用的方式向操作系统提出服务请求，由操作系统代为完成。这样可以 **保证系统的稳定性与安全性**，防止用户进行非法操作。

系统调用可按照以下功能分类：

1. 设备管理：完成设备的请求释放与启动等功能
2. 文件管理：完成文件的读写创建删除等功能
3. 进程控制：完成进程的创建撤销阻塞唤醒等功能
4. 进程通信：完成进程之间的消息传递、信号传递等功能
5. 内存管理：完成内存的分配回收等功能

**编程语言：**向上提供库函数，有时候会将系统调用封装成库函数，已隐藏系统调用的一些细节使得上层进行系统调用更加方便

**操作系统：**向上提供系统调用

**取绝对值这种库函数不会涉及系统调用但是创建新的文件函数会调用系统调用。**

系统调用的过程：

传递系统调用参数->执行陷入指令（用户态）->自行系统调用相关的服务程序（核心态）->返回用户程序

1. 陷入指令是在用**户态执行的（唯一一个只在用户态执行的指令）**，执行陷入指令后立即**引发一个内中断，**从而使得CPU进入核心态
2. 发出系统调用请求**在用户态，但是对系统调用的相应处理是在核心态**

